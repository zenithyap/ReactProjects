{"ast":null,"code":"import _toConsumableArray from\"C:/Users/Zenith Yap/ReactProjects/project/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/Zenith Yap/ReactProjects/project/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import NavigationBar from\"./NavigationBar\";import'./text.css';import{useState,useEffect}from\"react\";import moment from'moment';import Axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function useRecord(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),entries=_useState2[0],setEntries=_useState2[1];var getEntriesFromStorage=function getEntriesFromStorage(){return JSON.parse(window.localStorage.getItem('recordEntries'));};// need to stringify item before parsing and storing to local storage\n// React Hook useEffect contains a call to 'setEntries'. \n// Without a list of dependencies, this can lead to an infinite \n// chain of updates. To fix this, pass [] as a second argument to \n// the useEffect Hook\nvar setEntriesToStorage=function setEntriesToStorage(items){return window.localStorage.setItem('recordEntries',JSON.stringify(items));};useEffect(function(){var entriesFromStorage=getEntriesFromStorage();if(entriesFromStorage){setEntries(entriesFromStorage);}},[]);var storeEntry=function storeEntry(entry){var newEntries=[entry].concat(_toConsumableArray(entries));setEntries(newEntries);setEntriesToStorage(newEntries);};var deleteEntry=function deleteEntry(index){var newEntries=[].concat(_toConsumableArray(entries.slice(0,index)),_toConsumableArray(entries.slice(index+1)));setEntries(newEntries);setEntriesToStorage(newEntries);};return[entries,storeEntry,deleteEntry];}function EntryList(_ref){var list=_ref.list,deleteEntry=_ref.deleteEntry;// why got => e ?\n// Higher order delete entry click handler\nvar handleDeleteEntry=function handleDeleteEntry(index){return function(e){deleteEntry(index);};};return/*#__PURE__*/_jsx(\"div\",{className:\"entry-list\",children:list&&list.map(function(item,i){var itemDate=moment(item.date).format('L');return/*#__PURE__*/_jsx(\"div\",{className:\"card mb-2 border-dark\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body bg-dark text-white\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"card-title\",children:itemDate}),/*#__PURE__*/_jsx(\"p\",{className:\"card-text>\",children:item.message}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger btn-sm\",onClick:handleDeleteEntry(i),children:\"Delete\"})]})},i);})});}// useRef.current.focus() purpose?\nfunction Entry(_ref2){var addEntry=_ref2.addEntry;var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),message=_useState4[0],setMessage=_useState4[1];var handleOnChange=function handleOnChange(e){return setMessage(e.target.value);};var handleOnSubmit=function handleOnSubmit(e){e.preventDefault();if(message&&message.trim().length>0){addEntry({message:message,date:Date.now()});Axios.post('http://localhost:3001/create',{date:Date.now(),text:message}).then(function(){console.log(\"Success\");});}setMessage(\"\");};return/*#__PURE__*/_jsx(\"form\",{onSubmit:handleOnSubmit,children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control mb-2\",value:message,onChange:handleOnChange,type:\"text\"}),/*#__PURE__*/_jsx(\"button\",{disabled:message.trim().length===0,className:\"btn mb-2 btn-success form-control\",type:\"submit\",children:\"Submit\"})]})});}export default function Record(){var _useRecord=useRecord(),_useRecord2=_slicedToArray(_useRecord,3),entries=_useRecord2[0],storeEntry=_useRecord2[1],deleteEntry=_useRecord2[2];var handleStoreEntry=function handleStoreEntry(entry){return storeEntry(entry);};var handleDeleteEntry=function handleDeleteEntry(index){return deleteEntry(index);};return/*#__PURE__*/_jsxs(\"div\",{className:\"bg\",children:[/*#__PURE__*/_jsx(NavigationBar,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"Record\"}),/*#__PURE__*/_jsx(Entry,{addEntry:handleStoreEntry}),/*#__PURE__*/_jsx(EntryList,{list:entries,deleteEntry:handleDeleteEntry})]})]});}","map":{"version":3,"names":["NavigationBar","useState","useEffect","moment","Axios","useRecord","entries","setEntries","getEntriesFromStorage","JSON","parse","window","localStorage","getItem","setEntriesToStorage","items","setItem","stringify","entriesFromStorage","storeEntry","entry","newEntries","deleteEntry","index","slice","EntryList","list","handleDeleteEntry","e","map","item","i","itemDate","date","format","message","Entry","addEntry","setMessage","handleOnChange","target","value","handleOnSubmit","preventDefault","trim","length","Date","now","post","text","then","console","log","Record","handleStoreEntry"],"sources":["C:/Users/Zenith Yap/ReactProjects/project/src/pages/Record.js"],"sourcesContent":["import NavigationBar from \"./NavigationBar\";\r\nimport './text.css'\r\nimport { useState, useEffect } from \"react\"\r\nimport moment from 'moment'\r\nimport Axios from 'axios'\r\n\r\nfunction useRecord() {\r\n    const [entries, setEntries] = useState([])\r\n\r\n    const getEntriesFromStorage = () => JSON.parse(\r\n        window.localStorage.getItem('recordEntries')\r\n    )\r\n\r\n    // need to stringify item before parsing and storing to local storage\r\n    // React Hook useEffect contains a call to 'setEntries'. \r\n    // Without a list of dependencies, this can lead to an infinite \r\n    // chain of updates. To fix this, pass [] as a second argument to \r\n    // the useEffect Hook\r\n    const setEntriesToStorage = items => \r\n        window.localStorage.setItem('recordEntries', JSON.stringify(items))\r\n        useEffect(() => {\r\n            const entriesFromStorage = getEntriesFromStorage()\r\n            if (entriesFromStorage) {\r\n                setEntries(entriesFromStorage)\r\n            }\r\n        }, [])\r\n    \r\n    const storeEntry = entry => {\r\n        const newEntries = [entry, ...entries]\r\n        setEntries(newEntries)\r\n        setEntriesToStorage(newEntries)\r\n    }\r\n\r\n    const deleteEntry = index => {\r\n        const newEntries = [...entries.slice(0, index), ...entries.slice(index+1)]\r\n        setEntries(newEntries)\r\n        setEntriesToStorage(newEntries)\r\n    }\r\n\r\n    return [entries, storeEntry, deleteEntry]\r\n}\r\n\r\nfunction EntryList({list, deleteEntry}) {\r\n    // why got => e ?\r\n    // Higher order delete entry click handler\r\n    const handleDeleteEntry = index => e => {\r\n        deleteEntry(index)\r\n    }\r\n\r\n    return (\r\n        <div className='entry-list'>\r\n            {\r\n                list && list.map((item, i) => {\r\n                    const itemDate = moment(item.date).format('L')\r\n                    return (\r\n                        <div className='card mb-2 border-dark' key={i}>\r\n                            <div className='card-body bg-dark text-white'>\r\n                                <h4 className='card-title'>{itemDate}</h4>\r\n                                <p className='card-text>'>{item.message}</p>\r\n                                <button className='btn btn-danger btn-sm' onClick={handleDeleteEntry(i)}>Delete</button>\r\n                            </div>\r\n                        </div>\r\n                    )\r\n                })\r\n            }\r\n        </div>\r\n    )\r\n}\r\n\r\n// useRef.current.focus() purpose?\r\nfunction Entry({addEntry}) {\r\n    const [message, setMessage] = useState(\"\")\r\n    const handleOnChange = e => setMessage(e.target.value)\r\n    const handleOnSubmit = e => {\r\n        e.preventDefault()\r\n        if (message && message.trim().length > 0) {\r\n            addEntry({\r\n                message,\r\n                date: Date.now()\r\n            })\r\n            Axios.post('http://localhost:3001/create', {\r\n                date: Date.now(),\r\n                text: message\r\n            }).then(() => {\r\n                console.log(\"Success\")\r\n            })\r\n        }\r\n        setMessage(\"\")\r\n    }\r\n\r\n    return (\r\n        <form onSubmit={handleOnSubmit}>\r\n            <div className=\"form-group\">\r\n                <textarea\r\n                    className=\"form-control mb-2\"\r\n                    value={message}\r\n                    onChange={handleOnChange}\r\n                    type=\"text\"\r\n                />\r\n                <button disabled={message.trim().length === 0}\r\n                    className=\"btn mb-2 btn-success form-control\" type=\"submit\">\r\n                        Submit\r\n                </button>\r\n            </div>\r\n        </form>\r\n    )\r\n}\r\n\r\nexport default function Record() {\r\n    const [entries, storeEntry, deleteEntry] = useRecord();\r\n    const handleStoreEntry = (entry) => storeEntry(entry)\r\n    const handleDeleteEntry = (index) => deleteEntry(index)\r\n    return (\r\n        <div className=\"bg\">\r\n            <NavigationBar/>\r\n            <div className=\"container\">\r\n                <h1 className='title'>\r\n                    Record\r\n                </h1>\r\n                <Entry addEntry={handleStoreEntry}/>\r\n                <EntryList list={entries} deleteEntry={handleDeleteEntry}/>\r\n            </div>\r\n        </div>\r\n    )\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}