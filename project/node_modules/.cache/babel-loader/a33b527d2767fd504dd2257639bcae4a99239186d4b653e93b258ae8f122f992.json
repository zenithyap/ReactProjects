{"ast":null,"code":"import useMergedRefs from '@restart/hooks/useMergedRefs';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport React, { useRef, useEffect, cloneElement } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function useTransition(_ref) {\n  var inProp = _ref.in,\n    onTransition = _ref.onTransition,\n    _ref$initial = _ref.initial,\n    initial = _ref$initial === void 0 ? true : _ref$initial;\n  var ref = useRef(null);\n  var isInitialRef = useRef(true);\n  var handleTransition = useEventCallback(onTransition);\n  useEffect(function () {\n    if (isInitialRef.current && !initial) {\n      return;\n    }\n    handleTransition({\n      in: inProp,\n      element: ref.current,\n      initial: isInitialRef.current\n    });\n  }, [inProp, initial, handleTransition]);\n  useEffect(function () {\n    isInitialRef.current = false;\n    return function () {\n      isInitialRef.current = true;\n    };\n  }, []);\n  return ref;\n}\n/**\n * Adapts an imperative transition function to a subset of the RTG `<Transition>` component API.\n */\nexport default function ImperativeTransition(_ref2) {\n  var children = _ref2.children,\n    inProp = _ref2.in,\n    appear = _ref2.appear,\n    onExited = _ref2.onExited,\n    onEntered = _ref2.onEntered,\n    transition = _ref2.transition;\n  var ref = useTransition({\n    in: !!inProp,\n    initial: appear,\n    onTransition: function onTransition(options) {\n      var onFinish = function onFinish() {\n        if (options.in) onEntered == null ? void 0 : onEntered(options.element, options.initial);else onExited == null ? void 0 : onExited(options.element);\n      };\n      Promise.resolve(transition(options)).then(onFinish);\n    }\n  });\n  var combinedRef = useMergedRefs(ref, children.ref);\n  return /*#__PURE__*/cloneElement(children, {\n    ref: combinedRef\n  });\n}\nexport function renderTransition(Component, runTransition, props) {\n  if (Component) {\n    return /*#__PURE__*/_jsx(Component, Object.assign({}, props));\n  }\n  if (runTransition) {\n    return /*#__PURE__*/_jsx(ImperativeTransition, Object.assign({}, props, {\n      transition: runTransition\n    }));\n  }\n  return props.children;\n}","map":{"version":3,"names":["useMergedRefs","useEventCallback","React","useRef","useEffect","cloneElement","jsx","_jsx","useTransition","inProp","in","onTransition","initial","ref","isInitialRef","handleTransition","current","element","ImperativeTransition","children","appear","onExited","onEntered","transition","options","onFinish","Promise","resolve","then","combinedRef","renderTransition","Component","runTransition","props","Object","assign"],"sources":["/workspaces/ReactProjects/project/node_modules/@restart/ui/esm/ImperativeTransition.js"],"sourcesContent":["import useMergedRefs from '@restart/hooks/useMergedRefs';\nimport useEventCallback from '@restart/hooks/useEventCallback';\nimport React, { useRef, useEffect, cloneElement } from 'react';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nexport function useTransition({\n  in: inProp,\n  onTransition,\n  initial = true\n}) {\n  const ref = useRef(null);\n  const isInitialRef = useRef(true);\n  const handleTransition = useEventCallback(onTransition);\n  useEffect(() => {\n    if (isInitialRef.current && !initial) {\n      return;\n    }\n    handleTransition({\n      in: inProp,\n      element: ref.current,\n      initial: isInitialRef.current\n    });\n  }, [inProp, initial, handleTransition]);\n  useEffect(() => {\n    isInitialRef.current = false;\n    return () => {\n      isInitialRef.current = true;\n    };\n  }, []);\n  return ref;\n}\n/**\n * Adapts an imperative transition function to a subset of the RTG `<Transition>` component API.\n */\nexport default function ImperativeTransition({\n  children,\n  in: inProp,\n  appear,\n  onExited,\n  onEntered,\n  transition\n}) {\n  const ref = useTransition({\n    in: !!inProp,\n    initial: appear,\n    onTransition: options => {\n      const onFinish = () => {\n        if (options.in) onEntered == null ? void 0 : onEntered(options.element, options.initial);else onExited == null ? void 0 : onExited(options.element);\n      };\n      Promise.resolve(transition(options)).then(onFinish);\n    }\n  });\n  const combinedRef = useMergedRefs(ref, children.ref);\n  return /*#__PURE__*/cloneElement(children, {\n    ref: combinedRef\n  });\n}\nexport function renderTransition(Component, runTransition, props) {\n  if (Component) {\n    return /*#__PURE__*/_jsx(Component, Object.assign({}, props));\n  }\n  if (runTransition) {\n    return /*#__PURE__*/_jsx(ImperativeTransition, Object.assign({}, props, {\n      transition: runTransition\n    }));\n  }\n  return props.children;\n}"],"mappings":"AAAA,OAAOA,aAAa,MAAM,8BAA8B;AACxD,OAAOC,gBAAgB,MAAM,iCAAiC;AAC9D,OAAOC,KAAK,IAAIC,MAAM,EAAEC,SAAS,EAAEC,YAAY,QAAQ,OAAO;AAC9D,SAASC,GAAG,IAAIC,IAAI,QAAQ,mBAAmB;AAC/C,OAAO,SAASC,aAAa,OAI1B;EAAA,IAHGC,MAAM,QAAVC,EAAE;IACFC,YAAY,QAAZA,YAAY;IAAA,oBACZC,OAAO;IAAPA,OAAO,6BAAG,IAAI;EAEd,IAAMC,GAAG,GAAGV,MAAM,CAAC,IAAI,CAAC;EACxB,IAAMW,YAAY,GAAGX,MAAM,CAAC,IAAI,CAAC;EACjC,IAAMY,gBAAgB,GAAGd,gBAAgB,CAACU,YAAY,CAAC;EACvDP,SAAS,CAAC,YAAM;IACd,IAAIU,YAAY,CAACE,OAAO,IAAI,CAACJ,OAAO,EAAE;MACpC;IACF;IACAG,gBAAgB,CAAC;MACfL,EAAE,EAAED,MAAM;MACVQ,OAAO,EAAEJ,GAAG,CAACG,OAAO;MACpBJ,OAAO,EAAEE,YAAY,CAACE;IACxB,CAAC,CAAC;EACJ,CAAC,EAAE,CAACP,MAAM,EAAEG,OAAO,EAAEG,gBAAgB,CAAC,CAAC;EACvCX,SAAS,CAAC,YAAM;IACdU,YAAY,CAACE,OAAO,GAAG,KAAK;IAC5B,OAAO,YAAM;MACXF,YAAY,CAACE,OAAO,GAAG,IAAI;IAC7B,CAAC;EACH,CAAC,EAAE,EAAE,CAAC;EACN,OAAOH,GAAG;AACZ;AACA;AACA;AACA;AACA,eAAe,SAASK,oBAAoB,QAOzC;EAAA,IANDC,QAAQ,SAARA,QAAQ;IACJV,MAAM,SAAVC,EAAE;IACFU,MAAM,SAANA,MAAM;IACNC,QAAQ,SAARA,QAAQ;IACRC,SAAS,SAATA,SAAS;IACTC,UAAU,SAAVA,UAAU;EAEV,IAAMV,GAAG,GAAGL,aAAa,CAAC;IACxBE,EAAE,EAAE,CAAC,CAACD,MAAM;IACZG,OAAO,EAAEQ,MAAM;IACfT,YAAY,EAAE,sBAAAa,OAAO,EAAI;MACvB,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,GAAS;QACrB,IAAID,OAAO,CAACd,EAAE,EAAEY,SAAS,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,SAAS,CAACE,OAAO,CAACP,OAAO,EAAEO,OAAO,CAACZ,OAAO,CAAC,CAAC,KAAKS,QAAQ,IAAI,IAAI,GAAG,KAAK,CAAC,GAAGA,QAAQ,CAACG,OAAO,CAACP,OAAO,CAAC;MACrJ,CAAC;MACDS,OAAO,CAACC,OAAO,CAACJ,UAAU,CAACC,OAAO,CAAC,CAAC,CAACI,IAAI,CAACH,QAAQ,CAAC;IACrD;EACF,CAAC,CAAC;EACF,IAAMI,WAAW,GAAG7B,aAAa,CAACa,GAAG,EAAEM,QAAQ,CAACN,GAAG,CAAC;EACpD,OAAO,aAAaR,YAAY,CAACc,QAAQ,EAAE;IACzCN,GAAG,EAAEgB;EACP,CAAC,CAAC;AACJ;AACA,OAAO,SAASC,gBAAgB,CAACC,SAAS,EAAEC,aAAa,EAAEC,KAAK,EAAE;EAChE,IAAIF,SAAS,EAAE;IACb,OAAO,aAAaxB,IAAI,CAACwB,SAAS,EAAEG,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEF,KAAK,CAAC,CAAC;EAC/D;EACA,IAAID,aAAa,EAAE;IACjB,OAAO,aAAazB,IAAI,CAACW,oBAAoB,EAAEgB,MAAM,CAACC,MAAM,CAAC,CAAC,CAAC,EAAEF,KAAK,EAAE;MACtEV,UAAU,EAAES;IACd,CAAC,CAAC,CAAC;EACL;EACA,OAAOC,KAAK,CAACd,QAAQ;AACvB"},"metadata":{},"sourceType":"module","externalDependencies":[]}